@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 30 8% 6%;
    --foreground: 30 10% 12%;

    --card: 30 10% 10%;
    --card-foreground: 30 10% 12%;

    --popover: 30 10% 10%;
    --popover-foreground: 30 10% 12%;

    --primary: 38 90% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 30 8% 14%;
    --secondary-foreground: 30 10% 12%;

    --muted: 30 6% 18%;
    --muted-foreground: 35 10% 50%;

    --accent: 38 85% 50%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 100%;

    --border: 35 12% 20%;
    --input: 35 10% 14%;
    --ring: 38 90% 55%;

    --radius: 0.75rem;

    --sidebar-background: 30 8% 6%;
    --sidebar-foreground: 30 10% 12%;
    --sidebar-primary: 38 90% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 30 10% 12%;
    --sidebar-accent-foreground: 30 10% 12%;
    --sidebar-border: 35 12% 20%;
    --sidebar-ring: 38 90% 55%;

    /* Cinematic tokens */
    --golden: 38 90% 55%;
    --golden-light: 42 95% 65%;
    --golden-dark: 34 85% 42%;
    --charcoal: 30 6% 10%;
    --deep-black: 30 8% 5%;
    --warm-gray: 30 8% 42%;
  }

  .dark {
    --background: 30 8% 6%;
    --foreground: 30 10% 12%;
    --card: 30 10% 10%;
    --card-foreground: 30 10% 12%;
    --popover: 30 10% 10%;
    --popover-foreground: 30 10% 12%;
    --primary: 38 90% 55%;
    --primary-foreground: 0 0% 100%;
    --secondary: 30 8% 14%;
    --secondary-foreground: 30 10% 12%;
    --muted: 30 6% 18%;
    --muted-foreground: 35 10% 50%;
    --accent: 38 85% 50%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 100%;
    --border: 35 12% 20%;
    --input: 35 10% 14%;
    --ring: 38 90% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    /* scroll-behavior: smooth removed — conflicts with GSAP ScrollTrigger video scrubbing */
  }

  html {
    background-color: #000000;
  }

  body {
    background-color: #000000;
    color: hsl(var(--foreground));
    font-family: 'Outfit', sans-serif;
    overflow-x: hidden;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  /* Desktop performance optimizations */
  @media (min-width: 1025px) {
    * {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body {
      overscroll-behavior: none;
    }
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Cormorant Garamond', serif;
  }
}

@layer utilities {

  /* Grain overlay for cinematic texture */
  .grain-overlay {
    position: relative;
  }

  .grain-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  /* Hero gradient */
  .hero-gradient {
    background: linear-gradient(to top,
        hsl(30 8% 6% / 0.85) 0%,
        hsl(30 8% 6% / 0.4) 40%,
        hsl(30 8% 6% / 0.15) 70%,
        hsl(30 8% 6% / 0.05) 100%);
  }

  /* Accent text gradient — deep steel blue */
  .text-golden {
    background: linear-gradient(135deg,
        hsl(42 95% 65%) 0%,
        hsl(38 90% 55%) 50%,
        hsl(34 85% 42%) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Primary accent button — deep steel blue */
  .golden-button {
    background: linear-gradient(135deg,
        hsl(42 90% 52%) 0%,
        hsl(34 85% 42%) 100%);
    color: #1a1a1a;
    font-weight: 600;
    box-shadow:
      0 4px 20px hsl(38 90% 55% / 0.35),
      0 2px 8px hsl(30 8% 6% / 0.4);
  }

  .golden-button:hover {
    background: linear-gradient(135deg,
        hsl(44 92% 56%) 0%,
        hsl(36 88% 46%) 100%);
    box-shadow:
      0 6px 30px hsl(38 90% 55% / 0.45),
      0 4px 12px hsl(30 8% 6% / 0.4);
  }

  /* Ghost/outline button */
  .ghost-button {
    border: 1px solid hsl(38 90% 55% / 0.35);
    color: hsl(38 90% 55%);
    background: transparent;
    transition: all 0.3s ease;
  }

  .ghost-button:hover {
    border-color: hsl(38 90% 55% / 0.7);
    background: hsl(38 90% 55% / 0.06);
    box-shadow: 0 0 30px hsl(38 90% 55% / 0.1);
  }

  /* Glassmorphism card */
  .glass-card {
    background: hsl(30 10% 10% / 0.7);
    backdrop-filter: blur(20px);
    border: 1px solid hsl(35 12% 20% / 0.4);
  }

  /* Glow card with hover effect */
  .glow-card {
    background: hsl(30 10% 9% / 0.75);
    backdrop-filter: blur(12px);
    border: 1px solid hsl(35 12% 20% / 0.25);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .glow-card:hover {
    border-color: hsl(38 90% 55% / 0.25);
    box-shadow:
      0 8px 40px hsl(38 90% 55% / 0.06),
      0 0 0 1px hsl(38 90% 55% / 0.08);
    transform: translateY(-4px);
  }

  /* Section divider - thin gold line */
  .section-divider {
    width: 80px;
    height: 1px;
    background: linear-gradient(90deg,
        transparent,
        hsl(38 90% 55% / 0.5),
        transparent);
    margin: 0 auto;
  }

  /* Wide section divider */
  .section-divider-wide {
    width: 200px;
    height: 1px;
    background: linear-gradient(90deg,
        transparent,
        hsl(38 90% 55% / 0.35),
        transparent);
    margin: 0 auto;
  }

  /* Input focus glow */
  .input-glow:focus {
    box-shadow: 0 0 0 2px hsl(38 90% 55% / 0.25);
  }

  /* Scroll progress bar */
  .scroll-progress {
    position: fixed;
    top: 0;
    left: 0;
    height: 2px;
    background: linear-gradient(90deg,
        hsl(38 90% 55%),
        hsl(34 85% 42%));
    z-index: 9999;
    transform-origin: left;
  }

  /* Cinematic section backgrounds — transparent to let video show */
  .bg-charcoal {
    background-color: transparent;
  }

  .bg-deep-black {
    background-color: transparent;
  }

  /* Particle canvas */
  .particle-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }

  /* Timeline connector */
  .timeline-line {
    width: 2px;
    background: linear-gradient(to bottom,
        transparent,
        hsl(38 90% 55% / 0.35) 10%,
        hsl(38 90% 55% / 0.35) 90%,
        transparent);
  }

  /* Number accent */
  .number-golden {
    background: linear-gradient(135deg,
        hsl(42 95% 65%) 0%,
        hsl(38 90% 55%) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* ─── Scroll Video Background ─── */
  .scroll-video-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    /* Use lvh (largest viewport height) so the container always covers
       the full screen even when iOS Safari's URL bar is visible.
       The bar animates over the top of our content — no resize pop. */
    height: 100lvh;
    z-index: 0;
    overflow: hidden;
  }

  /* Fallback for browsers that don't support lvh */
  @supports not (height: 100lvh) {
    .scroll-video-container {
      height: 100vh;
    }
  }

  .scroll-video-media {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
  }

  .scroll-video-canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  .scroll-video-overlay {
    position: absolute;
    inset: 0;
    background: transparent;
  }

  .scroll-video-vignette {
    position: absolute;
    inset: 0;
    background: transparent;
    pointer-events: none;
  }

  /* ── Cinematic edge shadows — smooth Apple-style tambour fade ──
     Multi-stop gradients for a natural, non-linear falloff.
     Sits above video (z-index 5) so it covers everything. */
  .scroll-video-shadow-top,
  .scroll-video-shadow-bottom {
    position: absolute;
    left: 0;
    right: 0;
    z-index: 5;
    pointer-events: none;
  }

  .scroll-video-shadow-top {
    top: 0;
    height: 12%;
    background: linear-gradient(to bottom,
        rgba(0, 0, 0, 0.5) 0%,
        rgba(0, 0, 0, 0.25) 30%,
        rgba(0, 0, 0, 0.08) 60%,
        rgba(0, 0, 0, 0) 100%);
  }

  .scroll-video-shadow-bottom {
    bottom: 0;
    height: 35%;
    background: linear-gradient(to top,
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0.8) 8%,
        rgba(0, 0, 0, 0.5) 25%,
        rgba(0, 0, 0, 0.25) 45%,
        rgba(0, 0, 0, 0.1) 65%,
        rgba(0, 0, 0, 0.03) 80%,
        rgba(0, 0, 0, 0) 100%);
  }

  /* Landscape mobile + desktop */
  @media (orientation: landscape) {
    .scroll-video-shadow-top {
      height: 10%;
    }

    .scroll-video-shadow-bottom {
      height: 30%;
    }
  }

  /* Large desktops */
  @media (min-width: 1280px) {
    .scroll-video-shadow-top {
      height: 8%;
      background: linear-gradient(to bottom,
          rgba(0, 0, 0, 0.4) 0%,
          rgba(0, 0, 0, 0.15) 40%,
          rgba(0, 0, 0, 0) 100%);
    }

    .scroll-video-shadow-bottom {
      height: 25%;
      background: linear-gradient(to top,
          rgba(0, 0, 0, 0.9) 0%,
          rgba(0, 0, 0, 0.5) 20%,
          rgba(0, 0, 0, 0.2) 45%,
          rgba(0, 0, 0, 0.05) 70%,
          rgba(0, 0, 0, 0) 100%);
    }
  }

  /* Bottom-of-content fade — covers the harsh edge where sections
     end and the black body background begins. Gradient goes upward
     from solid black so the content dissolves smoothly. */
  main::after {
    content: '';
    display: block;
    position: relative;
    z-index: 20;
    height: 120px;
    margin-top: -120px;
    background: linear-gradient(to top,
        rgba(0, 0, 0, 1) 0%,
        rgba(0, 0, 0, 0.7) 30%,
        rgba(0, 0, 0, 0.3) 60%,
        rgba(0, 0, 0, 0) 100%);
    pointer-events: none;
  }

  /* Cinematic text shadow for readability over video */
  .text-cinematic {
    text-shadow: 0 2px 12px hsl(30 8% 5% / 0.6),
      0 1px 4px hsl(30 8% 5% / 0.4);
  }

  /* Landscape mode overrides for hero section */
  @media (orientation: landscape) and (max-height: 500px) {
    .hero-content-landscape {
      margin-top: 1rem !important;
    }

    .hero-logo-landscape {
      width: 30vw !important;
      max-width: 200px !important;
      margin-bottom: 0.75rem !important;
    }

    .hero-tagline-landscape {
      font-size: 0.75rem !important;
      margin-bottom: 0.75rem !important;
    }

    .hero-philosophy-landscape {
      font-size: 0.7rem !important;
      margin-bottom: 0.75rem !important;
    }

    .hero-button-landscape {
      padding: 0.625rem 1.25rem !important;
      font-size: 0.75rem !important;
    }

    /* Mobile layout landscape overrides */
    .hero-mobile-logo {
      top: 2% !important;
      height: 35% !important;
    }

    .hero-mobile-logo img {
      width: 20vw !important;
      max-width: 140px !important;
    }

    .hero-mobile-text {
      top: 45% !important;
    }

    .hero-mobile-text p:first-child {
      font-size: 0.75rem !important;
      margin-bottom: 0.5rem !important;
    }

    .hero-mobile-text p:nth-child(2) {
      font-size: 0.7rem !important;
      margin-bottom: 0.5rem !important;
    }

    .hero-mobile-text button {
      padding: 0.5rem 1rem !important;
      font-size: 0.7rem !important;
    }
  }
}